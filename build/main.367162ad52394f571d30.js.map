{"version":3,"sources":["webpack:///./images/loading.gif","webpack:///./templates/card.hbs","webpack:///./js/api-service.js","webpack:///./js/get-refs.js","webpack:///./js/markup.js","webpack:///./js/lightbox.js","webpack:///./js/notifications.js","webpack:///./js/script.js"],"names":["module","exports","Handlebars","template","container","depth0","helpers","partials","data","helper","alias1","escapeExpression","alias2","lambda","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","hooks","helperMissing","nullContext","stack1","program","noop","KEY","getRefs","galleryContainer","document","querySelector","form","header","refs","renderImageCards","markup","cardTpl","insertAdjacentHTML","clearImageContainer","innerHTML","loadingPlaceholder","basicLightbox","loadingImgUrl","bigImg","errorNotFound","error","title","text","delay","errorNotice","notice","errorInfo","info","errorNoQuery","apiService","constructor","this","_page","_searchQuery","url","searchQuery","page","getData","then","response","hits","totalHits","images","fetch","json","newSearchQuery","newPage","currentWindowHeight","throttledScroll","throttle","e","pageYOffset","documentElement","clientHeight","scrollHeight","modal","show","countImages","count","childElementCount","notification","window","removeEventListener","close","fetchImages","offsetHeight","scrollTo","top","left","behavior","addEventListener","preventDefault","searchField","currentTarget","elements","query","value","target","nodeName","dataset","src"],"mappings":"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","file":"main.367162ad52394f571d30.js","sourcesContent":["module.exports = __webpack_public_path__ + \"images/loading.gif\";","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.escapeExpression, alias2=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\n    <img src=\\\"\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":14},\"end\":{\"line\":3,\"column\":30}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\" data-src=\\\"\"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" />\\n    <div class=\\\"stats\\\">\\n        <p class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\n            \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\n        </p>\\n        <p class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">visibility</i>\\n            \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\n        </p>\\n        <p class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">comment</i>\\n            \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\n        </p>\\n        <p class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\n            \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\n        </p>\\n    </div>\\n\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":24,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const KEY = '19178590-f2f628b09a5664f3e2bf6a47d';\nconst BASE_URL = `https://pixabay.com/api/`;\n\nexport default class ApiService {\n  constructor() {\n    this._page = 1;\n    this._searchQuery = '';\n  }\n\n  async fetchImages() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\n\n    return this.getData(url).then((response) => {\n      return response.hits;\n    });\n  }\n\n  async countImages() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\n\n    return this.getData(url).then((response) => {\n      return response.totalHits;\n    });\n  }\n\n  async getData(url) {\n    const images = await fetch(url);\n    const response = await images.json();\n\n    return response;\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n\n  set searchQuery(newSearchQuery) {\n    this._searchQuery = newSearchQuery;\n  }\n\n  get page() {\n    return this._page;\n  }\n\n  set page(newPage) {\n    this._page = newPage;\n  }\n}\n","export default function getRefs() {\n  return {\n    galleryContainer: document.querySelector('#gallery'),\n    form: document.querySelector('#search-form'),\n    header: document.querySelector('.search'),\n  };\n}\n","import cardTpl from '../templates/card.hbs';\nimport getRefs from './get-refs';\n\nconst refs = getRefs();\n\nfunction renderImageCards(data) {\n  const markup = cardTpl(data);\n  refs.galleryContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearImageContainer() {\n  refs.galleryContainer.innerHTML = '';\n}\n\nexport default { renderImageCards, clearImageContainer };\n","import * as basicLightbox from 'basiclightbox';\nimport loadingImgUrl from '../images/loading.gif';\n\nconst loadingPlaceholder = basicLightbox.create(\n  `<img src=\"${loadingImgUrl}\"/>`\n);\n\nfunction bigImg(data) {\n  return basicLightbox.create(`<img src=\"${data}\"/>`);\n}\nexport default { loadingPlaceholder, bigImg };\n","import { error, notice, info } from '@pnotify/core';\n\nfunction errorNotFound() {\n  error({\n    title: 'Oops!',\n    text: 'No images found :( Please enter another query!',\n    delay: 1500,\n  });\n}\n\nfunction errorNotice() {\n  notice({\n    title: 'Well..',\n    text: 'Something went wrong. Please reload a page.',\n    delay: 3000,\n  });\n}\n\nfunction errorInfo() {\n  info({\n    title: 'You found all pictures that you want!',\n    text: 'No more pictures for your search query.',\n    delay: 3000,\n  });\n}\n\nfunction errorNoQuery() {\n  info({\n    title: 'Empty query!',\n    text: 'Please enter a query.',\n    delay: 1500,\n  });\n}\n\nexport default { errorNotFound, errorNotice, errorInfo, errorNoQuery };\n","import ApiService from './api-service';\nimport getRefs from './get-refs';\nimport markup from './markup';\nimport modal from './lightbox';\nimport throttle from 'lodash.throttle';\nimport notification from './notifications';\n\nconst refs = getRefs();\nconst apiService = new ApiService();\n\nlet currentWindowHeight = 0;\nconst throttledScroll = throttle(onScroll, 500);\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.galleryContainer.addEventListener('click', openModal);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  modal.loadingPlaceholder.show();\n  let searchField = e.currentTarget.elements.query;\n  if (searchField.value === '') {\n    notification.errorNoQuery();\n    modal.loadingPlaceholder.close();\n    return;\n  }\n  markup.clearImageContainer();\n  apiService.page = 1;\n  apiService.searchQuery = searchField.value;\n  try {\n    apiService.countImages().then((count) => {\n      if (count === 0) {\n        notification.errorNotFound();\n        modal.loadingPlaceholder.close();\n        return;\n      }\n      apiService.fetchImages().then((data) => {\n        markup.renderImageCards(data);\n        window.addEventListener('scroll', throttledScroll);\n        modal.loadingPlaceholder.close();\n      });\n    });\n  } catch (error) {\n    notification.errorNotice();\n    modal.loadingPlaceholder.close();\n  }\n  searchField.value === '';\n}\n\nfunction onScroll(e) {\n  if (\n    pageYOffset + document.documentElement.clientHeight >\n    document.documentElement.scrollHeight - 1\n  ) {\n    modal.loadingPlaceholder.show();\n    try {\n      apiService.countImages().then((count) => {\n        if (count === refs.galleryContainer.childElementCount) {\n          notification.errorInfo();\n          window.removeEventListener('scroll', throttledScroll);\n          modal.loadingPlaceholder.close();\n          return;\n        }\n        apiService.fetchImages().then((data) => {\n          apiService.page += 1;\n          currentWindowHeight = refs.galleryContainer.offsetHeight;\n          markup.renderImageCards(data);\n          modal.loadingPlaceholder.close();\n          window.scrollTo({\n            top: currentWindowHeight,\n            left: 0,\n            behavior: 'smooth',\n          });\n        });\n      });\n    } catch (error) {\n      notification.errorNotice();\n      modal.loadingPlaceholder.close();\n    }\n  }\n}\n\nfunction openModal(e) {\n  if (e.target.nodeName !== 'IMG') return;\n  modal.bigImg(e.target.dataset.src).show();\n}\n"],"sourceRoot":""}